# webpack 的打包机制

webpack 从启动到结束会依次执行以下流程：

1. 初始化参数：解析 webpack 配置参数，生成 Compiler 实例
2. 开始编译: 用上一步得到的参数初始 Compiler 对象，加载所有配置的插件，通过执行对象的 run 方法开始执行编译
3. 确定入口：根据配置中的 Entry 找出所有入口文件
4. 解析文件：调用所有配置的 Loader 对模块进行编译，再找出该模块依赖的模块，再递归本步骤直到所有入口依赖的文件都经过了本步骤的处理
5. 生成依赖图谱：在经过第4步使用 Loader 翻译完所有模块后， 得到了每个模块被编译后的最终内容及它们之间的依赖关系
6. 输出：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 Chunk，再将每个 Chunk 转换成一个单独的文件加入输出列表中，这是可以修改输出内容的最后机会
7. 生成打包文件：在确定好输出内容后，根据配置确定输出的路径和文件名，将文件的内容写入文件系统中。


### ES6 转化为 ES5 的原理

- 解析：解析代码字符串，生成 AST；
- 转换：按一定的规则转换、修改 AST；
- 生成：将修改后的 AST 转换成普通代码。